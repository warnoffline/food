import{r as t,j as e,I as q,T as m,u as Q,L as z,a as W}from"./index-BIpS7iMd.js";import{I as $,F as H,P as U}from"./Pagination-DICxOAA4.js";import{B as j,C as B}from"./Card-DO4ii4L8.js";import{C as K,D as G,I as Y,T as J,F as O,R as b,S as A,a as X}from"./TimerIcon-DlAK_s5x.js";import{o as F,M as D}from"./instance-0QNMeHl5.js";import"./BackArrowIcon-DXkg3eSV.js";const ee="_root_diaqg_1",oe="_root__content_diaqg_7",te="_root__banner_diaqg_11",se="_root__quote_diaqg_19",ne="_root__items_diaqg_25",re="_root__pagination_diaqg_46",I={root:ee,root__content:oe,root__banner:te,root__quote:se,root__items:ne,root__pagination:re},ce="_root_1fd70_1",ae="_root__input_1fd70_6",ie="_root__find_1fd70_9",le="_root__select_1fd70_14",_e="_root__filters_1fd70_20",de="_root__button_1fd70_23",f={root:ce,root__input:ae,root__find:ie,root__select:le,root__filters:_e,root__button:de},ue=s=>e.jsx(q,{...s,children:e.jsx("path",{d:"M21 3H5C4.73478 3 4.48043 3.10536 4.29289 3.29289C4.10536 3.48043 4 3.73478 4 4V6.59C4 7.113 4.213 7.627 4.583 7.997L10 13.414V21C10.0002 21.1704 10.0439 21.3379 10.1269 21.4867C10.2099 21.6354 10.3295 21.7605 10.4744 21.8502C10.6193 21.9398 10.7847 21.9909 10.9549 21.9988C11.1251 22.0066 11.2945 21.9709 11.447 21.895L15.447 19.895C15.786 19.725 16 19.379 16 19V13.414L21.417 7.997C21.787 7.627 22 7.113 22 6.59V4C22 3.73478 21.8946 3.48043 21.7071 3.29289C21.5196 3.10536 21.2652 3 21 3ZM14.293 12.293C14.2 12.3857 14.1262 12.4959 14.0759 12.6172C14.0256 12.7386 13.9998 12.8687 14 13V18.382L12 19.382V13C12.0002 12.8687 11.9744 12.7386 11.9241 12.6172C11.8738 12.4959 11.8 12.3857 11.707 12.293L6 6.59V5H20.001L20.003 6.583L14.293 12.293Z"})}),pe=t.memo(ue),he="_root__overlay_yukar_1",me="_root__content_yukar_13",xe="_root__header_yukar_28",ge="_root__body_yukar_41",je="_root__actions_yukar_44",v={root__overlay:he,root__content:me,root__header:xe,"root__btn-close":"_root__btn-close_yukar_34",root__body:ge,root__actions:je},fe=({open:s,onClose:r,title:o,children:a,actions:c})=>{const l=t.useCallback(i=>{i.stopPropagation(),r()},[r]);return t.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),e.jsx(e.Fragment,{children:s&&e.jsx("div",{className:v.root__overlay,onMouseDown:l,children:e.jsxs("div",{className:v.root__content,onMouseDown:i=>i.stopPropagation(),children:[e.jsxs("div",{className:v.root__header,children:[o&&e.jsx(m,{view:"title",className:v.root__title,children:o}),e.jsx("button",{className:v["root__btn-close"],onClick:r,children:"×"})]}),e.jsx("div",{className:v.root__body,children:a}),c&&e.jsx("div",{className:v.root__actions,children:c})]})})})},T=t.memo(fe),P=()=>{const[s,r]=t.useState(!1),o=t.useCallback(()=>{r(!0)},[]),a=t.useCallback(()=>{r(!1)},[]);return{isOpen:s,openModal:o,closeModal:a}},be=s=>e.jsx(q,{...s,children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.33545 8.74741L3.66418 7.25259L11.9998 14.662L20.3354 7.25259L21.6642 8.74741L11.9998 17.338L2.33545 8.74741Z"})}),Ce=t.memo(be),ye="_root__wrapper_1n5ay_3",ve="_root__input_1n5ay_7",Se="_open_1n5ay_11",ke="_root__options_1n5ay_14",we="_root__option_1n5ay_14",S={root__wrapper:ye,root__input:ve,open:Se,root__options:ke,root__option:we,"root__option-selected":"_root__option-selected_1n5ay_33","root__icon-opened":"_root__icon-opened_1n5ay_39"},Ne=({className:s,options:r,value:o,onChange:a,disabled:c,getTitle:l})=>{const[i,d]=t.useState(!1),[p,x]=t.useState(""),[u,C]=t.useState(r),h=t.useRef(null);t.useEffect(()=>{C(r.filter(_=>_.value.toLowerCase().includes(p.toLowerCase())))},[p,r]);const k=_=>{h.current&&!h.current.contains(_.target)&&d(!1)};t.useEffect(()=>(document.addEventListener("pointerdown",k),()=>{document.removeEventListener("pointerdown",k)}),[]);const M=t.useCallback(()=>{c||(d(_=>!_),i||x(""))},[c,i]),w=t.useCallback(_=>{o.some(y=>y.key===_.key)?a(o.filter(y=>y.key!==_.key)):a([...o,_])},[a,o]),N=t.useCallback(_=>{x(_)},[]);return e.jsxs("div",{ref:h,className:`${S.root} ${s}`,children:[e.jsx("div",{className:S.root__wrapper,children:e.jsx($,{value:o.length===0?p:l(o),onFocus:M,onChange:N,placeholder:o.length===0?l(o):"",disabled:c,color:i?"secondary":"primary",className:S.root__input,afterSlot:e.jsx(Ce,{onClick:M,color:"secondary",className:i?S["root__icon-opened"]:""})})}),i&&!c&&e.jsx("ul",{className:S.root__options,children:u.map(_=>e.jsx("li",{onClick:()=>w(_),className:`${S.root__option} ${o.some(y=>y.key===_.key)?S["root__option-selected"]:""}`,children:_.value},_.key))})]})},R=t.memo(Ne),Ie="_root_9nbk2_1",Me="_root__footer_9nbk2_6",$e="_root__btn_9nbk2_11",E={root:Ie,root__footer:Me,root__btn:$e},Fe=F(({onClose:s})=>{const r=O,o=r.filter,[a,c]=t.useState((o==null?void 0:o.cuisine)||[]),[l,i]=t.useState((o==null?void 0:o.diet)||[]),[d,p]=t.useState((o==null?void 0:o.intolerances)||[]),[x,u]=t.useState((o==null?void 0:o.type)||[]),[C,h]=t.useState((o==null?void 0:o.includeIngredients)||""),[k,M]=t.useState((o==null?void 0:o.excludeIngredients)||""),w=t.useMemo(()=>/^[A-Za-zА-Яа-я\s,]+$/,[]),N=(n,g)=>{n(g)},_=t.useCallback(n=>{(w.test(n)||n==="")&&h(n)},[w]),y=t.useCallback(n=>{(w.test(n)||n==="")&&M(n)},[w]),V=n=>{n.preventDefault(),window.confirm("Are you sure you want to reset the filters?")&&(c([]),i([]),p([]),u([]),h(""),M(""),r.resetFilters()),s()},Z=t.useCallback(n=>{n.preventDefault();const g={cuisine:a,diet:l,intolerances:d,type:x,includeIngredients:C.replace(/\s+/g,""),excludeIngredients:k.replace(/\s+/g,"")};r.setFilters(g),s()},[k,r,C,s,a,l,d,x]);return e.jsxs("form",{onSubmit:n=>Z(n),className:E.root,children:[e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Cuisines"}),e.jsx(R,{options:K,value:a,onChange:n=>N(c,n),getTitle:n=>n.map(g=>g.value).join(", ")||"Select cuisines"})]}),e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Diet Preferences"}),e.jsx(R,{options:G,value:l,onChange:n=>N(i,n),getTitle:n=>n.map(g=>g.value).join(", ")||"Select diet preferences"})]}),e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Intolerances"}),e.jsx(R,{options:Y,value:d,onChange:n=>N(p,n),getTitle:n=>n.map(g=>g.value).join(", ")||"Select intolerances"})]}),e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Meal Types"}),e.jsx(R,{options:J,value:x,onChange:n=>N(u,n),getTitle:n=>n.map(g=>g.value).join(", ")||"Select meal types"})]}),e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Include Ingredients"}),e.jsx($,{value:C,onChange:_,color:"primary",placeholder:"Enter ingredients to include (e.g., tomato, basil)"})]}),e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Exclude Ingredients"}),e.jsx($,{value:k,onChange:y,color:"primary",placeholder:"Enter ingredients to exclude (e.g., peanuts, gluten)"})]}),e.jsxs("div",{className:E.root__footer,children:[e.jsx(j,{className:E.root__btn,type:"submit",children:"Submit"}),e.jsx(j,{className:E.root__btn,fill:!0,onClick:V,children:"Reset"})]})]})}),Re=t.memo(Fe),Ee="_root_9nbk2_1",Le="_root__footer_9nbk2_6",De="_root__btn_9nbk2_11",L={root:Ee,root__footer:Le,root__btn:De},Te=F(({onClose:s})=>{const r=b.recipe,[o,a]=t.useState(""),c=Q(),l=t.useMemo(()=>/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,6}(:\d+)?(\/[^\s]*)?$/,[]),i=r?r.id:null,d=t.useCallback(async p=>{p.preventDefault(),(l.test(o)||o==="")&&(await b.getExtractRecipe(o),c(`/recipes/${i}`),a(""),s())},[l,o,c,i,s]);return e.jsxs("form",{onSubmit:d,className:L.root,children:[e.jsxs("div",{children:[e.jsx(m,{view:"label",children:"Url"}),e.jsx($,{value:o,onChange:a,color:"primary",placeholder:"Enter url"})]}),e.jsxs("div",{className:L.root__footer,children:[e.jsx(j,{loading:b.metaState.extractRecipe===D.loading,className:L.root__btn,type:"submit",children:"Submit"}),e.jsx(j,{className:L.root__btn,fill:!0,onClick:s,children:"Cancel"})]})]})}),Pe=t.memo(Te),qe=F(()=>{const s=P(),r=P(),o=A,a=t.useMemo(()=>/^[A-Za-zА-Яа-я\s,]+$/,[]),[c,l]=t.useState(o.query),i=t.useCallback(u=>{u.key==="Enter"&&o.setQuery(c)},[o,c]),d=t.useCallback(u=>{o.setQuery(u)},[o]),p=t.useCallback(u=>{(a.test(u)||u==="")&&l(u)},[a]),x=()=>{l(""),o.setQuery("")};return e.jsxs("div",{className:f.root,children:[e.jsxs("div",{className:f.root__find,children:[e.jsx($,{className:f.root__input,onKeyDown:i,value:c,onChange:p,placeholder:"Enter dishes"}),e.jsx(j,{onClick:()=>d(c),children:e.jsx(H,{width:24,height:24,color:"white"})}),c&&e.jsx(j,{onClick:x,children:"Clear"})]}),e.jsxs("div",{className:f.root__select,children:[e.jsx("div",{className:f.root__filters,children:e.jsx(j,{onClick:r.openModal,className:f.root__button,children:"Get Recipe From Website"})}),e.jsx("div",{className:f.root__filters,children:e.jsxs(j,{onClick:s.openModal,className:f.root__button,children:["Filters",e.jsx(pe,{color:"white"})]})})]}),e.jsx(T,{open:s.isOpen,onClose:s.closeModal,title:"Filters",children:e.jsx(Re,{onClose:s.closeModal})}),e.jsx(T,{open:r.isOpen,onClose:r.closeModal,title:"Find Recipe From Website",children:e.jsx(Pe,{onClose:r.closeModal})})]})}),Oe=t.memo(qe),Ae="_caption_rc86m_1",Ve={caption:Ae},Ze=F(({recipe:s})=>{var l;const r=b.isFavorite(s.id),o=t.useCallback(i=>{i.stopPropagation(),i.preventDefault(),r?b.removeFromFavorites(s.id):b.addRecipeToFavorites(s)},[r,s]),a=e.jsxs("span",{className:Ve.caption,children:[e.jsx(X,{fill:"none",width:14,height:14,strokeWidth:1.5}),e.jsxs("span",{children:[s.readyInMinutes," minutes"]})]}),c=e.jsx(j,{onClick:o,children:r?"Saved":"Save"});return e.jsx(z,{to:`/recipes/${s.id}`,children:e.jsx(B,{captionSlot:a,title:s.title,image:s.image,subtitle:e.jsx(m,{tag:"span",isHtml:!0,children:s.summary}),contentSlot:(l=s.nutrition)!=null&&l.nutrients[0]?`${s.nutrition.nutrients[0].amount} ${s.nutrition.nutrients[0].unit}`:"No nutrition data",actionSlot:c})})}),Qe=t.memo(Ze),Ge=F(()=>{const s=b,r=O.filter,o=A.query,a=s.recipes,c=s.queryString,l=Number(sessionStorage.getItem("recipe-current-page"))||1,i=12,[d,p]=t.useState(l),x=Math.ceil(s.totalResults/i),u=t.useCallback(h=>{p(h),sessionStorage.setItem("recipe-current-page",h.toString())},[]);t.useEffect(()=>{s.getRecipes(d)},[d,s,r,o,c]);const C=()=>{switch(b.metaState.recipes){case D.loading:return e.jsx(W,{});case D.error:return e.jsx(m,{view:"title",children:"Oops, something went wrong!"});case D.success:return a.length>0?e.jsx("div",{className:I.root__items,children:a.map(h=>e.jsx(Qe,{recipe:h},h.id))}):e.jsx(m,{view:"title",children:"No recipes found."});default:return null}};return e.jsxs("div",{className:I.root,children:[e.jsx("div",{className:I.root__banner,children:e.jsx("img",{src:"/banner.png",alt:"banner"})}),e.jsxs("div",{className:I.root__content,children:[e.jsx("div",{className:I.root__quote,children:e.jsx(m,{children:"Find the perfect food and drink ideas for every occasion, from weeknight dinners to holiday feasts."})}),e.jsx(Oe,{}),C(),x>1&&e.jsx("div",{className:I.root__pagination,children:e.jsx(U,{currentPage:d,totalPages:x,onPageChange:u})})]})]})});export{Ge as default};
