import{r,j as e,L as C,T as c,a as S}from"./index-BIpS7iMd.js";import{I as f,F as N,P as w}from"./Pagination-DICxOAA4.js";import{C as P,B as p}from"./Card-DO4ii4L8.js";import{o as x,M as h}from"./instance-0QNMeHl5.js";import{I as _}from"./IngredientStore-B55He7cX.js";import"./BackArrowIcon-DXkg3eSV.js";const y="_root_hp7j4_1",k="_root__center_hp7j4_6",$="_root__search_hp7j4_14",E="_root__items_hp7j4_17",b="_root__pagination_hp7j4_43",n={root:y,root__center:k,root__search:$,root__items:E,"root__no-items":"_root__no-items_hp7j4_38",root__pagination:b},q=x(({ingredient:t})=>{const o=`https://img.spoonacular.com/ingredients_500x500/${t.image}`;return e.jsx(C,{to:`/ingredients/${t.id}`,children:e.jsx(P,{captionSlot:t.aisle,title:t.name,image:o})})}),M=r.memo(q),F="_root_saz1t_1",L="_root__input_saz1t_5",j={root:F,root__input:L},z=({handleQuerySubmit:t})=>{const[o,i]=r.useState(sessionStorage.getItem("ingredient-query")||""),l=d=>{d.key==="Enter"&&t(o)},a=()=>{sessionStorage.setItem("recipe-query",""),i(""),t("")};return e.jsxs("div",{className:j.root,children:[e.jsx(f,{className:j.root__input,onKeyDown:l,value:o,onChange:i,placeholder:"Enter ingredient"}),e.jsx(p,{onClick:()=>t(o),children:e.jsx(N,{width:24,height:24,color:"white"})}),o&&e.jsx(p,{onClick:()=>a(),children:"Clear"})]})},B=r.memo(z),A=x(()=>{const t=_.ingredients,o=Number(sessionStorage.getItem("ingredient-current-page"))||1,[i,l]=r.useState(o),[a,d]=r.useState(sessionStorage.getItem("ingredient-query")||""),m=12,u=Math.ceil(_.totalResults/m),g=r.useCallback(s=>{l(s),sessionStorage.setItem("ingredient-current-page",s.toString())},[]),I=r.useCallback(s=>{d(s),sessionStorage.setItem("ingredient-query",s),g(1)},[g]);r.useEffect(()=>{a&&_.getIngredients({query:a,offset:(i-1)*m,number:m,metaInformation:!0})},[i,a]);const v=()=>{switch(_.metaState.ingredients){case h.loading:return e.jsx(S,{});case h.error:return e.jsxs("div",{className:n["root__no-items"],children:[e.jsx(c,{view:"title",children:"Oops, something went wrong!"}),";"]});case h.success:return t.length>0?e.jsx("div",{className:n.root__items,children:t.map(s=>e.jsx(M,{ingredient:s},s.id))}):e.jsx("div",{className:n["root__no-items"],children:e.jsx(c,{view:"title",children:"No results"})});default:return e.jsx("div",{className:n["root__no-items"],children:e.jsx(c,{view:"title",children:"No results"})})}};return e.jsx("div",{className:n.root,children:e.jsxs("div",{className:n.root__center,children:[e.jsx(c,{view:"p-xxl",children:"Ingredients"}),e.jsx("div",{children:e.jsx(B,{handleQuerySubmit:I})}),v(),u>1&&e.jsx("div",{className:n.root__pagination,children:e.jsx(w,{currentPage:i,totalPages:u,onPageChange:g})})]})})});export{A as default};
